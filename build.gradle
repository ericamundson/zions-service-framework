buildscript {
    ext {
        springBootVersion = '2.0.0.RELEASE'
    }
    repositories {
		mavenCentral()
        maven {
            name 'ZionsNexusPublicSnapshots'
            url "${nexusUrl}/repository/public-snapshots/"
        }
        maven {
            name 'ZionsNexusPublic'
            url "${nexusUrl}/repository/public/"
        }
    }
    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
    }
}

allprojects {
    apply plugin: 'maven'
    apply plugin: 'org.springframework.boot'
    apply plugin: 'io.spring.dependency-management'
    apply plugin: 'groovy'
    apply plugin: 'jacoco'
    if ("${buildType}" == 'ci') {
        apply plugin: 'codenarc'
    }
    
    bootJar {
        enabled = false
    }
    group = 'com.zionsbancorp.scm'
    version = '1.0.0-SNAPSHOT'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    repositories {
		mavenCentral()
        maven {
            name 'mvnrepository'
            url "https://mvnrepository.com/artifact/"
        }   
        mavenLocal()
        maven {
            name 'ZionsNexusPublicSnapshots'
            url "${nexusUrl}/repository/public-snapshots/"
        }   
        maven {
            name 'ZionsNexusPublic'
            url "${nexusUrl}/repository/public/"
        }
    }

    dependencies {
        // https://mvnrepository.com/artifact/org.apache.httpcomponents/httpclient
        // https://mvnrepository.com/artifact/com.github.rholder/gradle-one-jar
        compile 'org.springframework.boot:spring-boot-starter'
        compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.1'
        compile 'org.codehaus.groovy:groovy-all:2.4.13'
        compile 'org.apache.ivy:ivy:2.4.0'
        compile 'bsf:bsf:2.4.0'
        compile 'commons-io:commons-io:2.5'
        compile 'commons-cli:commons-cli:1.3.1'
        compile 'org.slf4j:slf4j-api:1.7.16'
//		compile group: 'net.sf.json-lib', name: 'json-lib', version: '2.4'
//		compile group: 'xom', name: 'xom', version: '1.2.5'
		
        compile('org.codehaus.groovy.modules.http-builder:http-builder:0.7.2') {
            exclude(module: 'groovy')
        }
    
        testCompile(
                'org.springframework.boot:spring-boot-starter-test',
                'junit:junit:4.12',
                'cglib:cglib-nodep:3.1',
                'org.objenesis:objenesis:2.4',
                'org.codehaus.groovy:groovy-all:2.4.13',
                'org.spockframework:spock-core:1.0-groovy-2.4'
        )
    }
}

dependencies {
    compile project(':zions-vsts-cli')
    compile project(':zions-vsts-services')
    compile project(':zions-vsts-build-microservice')
    compile project(':zions-vsts-policy-microservice')
}
